{% extends 'base.html' %}

{% block title %}
Регистрация
{% endblock %}

{% block content %}
<div class="container">
	<div class="row justify-content-center">
		<div class="col-12 col-md-10 col-lg-12">
			<div class="card shadow">
				<div class="card-body p-5">
					<h1 class="card-title text-center mb-4">Регистрация</h1>

					{% with messages = get_flashed_messages(with_categories=true) %}
					{% if messages %}
					{% for category, message in messages %}
					<div class="alert alert-{{ 'success' if category == 'success' else 'danger' }} alert-dismissible fade show"
						role="alert">
						{{ message }}
						<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
					</div>
					{% endfor %}
					{% endif %}
					{% endwith %}

					<form method="POST">
						<div class="row">
							<div class="col-md-6 mb-3">
								<label class="form-label">Имя:</label>
								<input class="form-control {% if errors and errors.name %}is-invalid{% endif %}"
									type="text" name="name" maxlength="100" value="{{ name if name else '' }}">
								{% if errors and errors.name %}
								<div class="invalid-feedback d-block">{{ errors.name }}</div>
								{% endif %}
							</div>

							<div class="col-md-6 mb-3">
								<label class="form-label">Email:</label>
								<input class="form-control {% if errors and errors.email %}is-invalid{% endif %}"
									type="email" name="email" maxlength="100" value="{{ email if email else '' }}">
								{% if errors and errors.email %}
								<div class="invalid-feedback d-block">{{ errors.email }}</div>
								{% endif %}
							</div>
						</div>

						<div class="row">
							<div class="col-md-6 mb-3">
								<label class="form-label">Пароль:</label>
								<input class="form-control {% if errors and errors.password %}is-invalid{% endif %}"
									type="password" name="password" minlength="6">
								{% if errors and errors.password %}
								<div class="invalid-feedback d-block">{{ errors.password }}</div>
								{% endif %}
								<div class="form-text">Минимум 6 символов</div>
							</div>

							<div class="col-md-6 mb-3">
								<label class="form-label">Повторите пароль:</label>
								<input
									class="form-control {% if errors and errors.confirm_password %}is-invalid{% endif %}"
									type="password" name="confirm_password">
								{% if errors and errors.confirm_password %}
								<div class="invalid-feedback d-block">{{ errors.confirm_password }}</div>
								{% endif %}
							</div>
						</div>

						<div class="d-grid gap-2 mt-3">
							<button type="submit" class="btn btn-primary btn-lg">Зарегистрироваться</button>
						</div>
					</form>

					<div class="text-center mt-4">
						<p>Уже есть аккаунт? <a href="{{ url_for('login') }}">Войдите</a></p>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}